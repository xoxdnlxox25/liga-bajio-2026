<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Copa Liga Baj√≠o Norte 2026</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      background-color: #05070a; 
      background-image: radial-gradient(circle at top right, #1a2e1a 0%, #05070a 50%);
    }
    .font-sport { font-family: 'Orbitron', sans-serif; }
    .active-tab { color: #00ff88; border-bottom: 3px solid #00ff88; text-shadow: 0 0 10px rgba(0,255,136,0.5); }
    .table-container { background: rgba(18, 24, 38, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
    .match-card { background: linear-gradient(145deg, #111827 0%, #030712 100%); border: 1px solid rgba(255,255,255,0.05); }
    .match-vs-box { background: #00ff88; color: #000; transform: skewX(-15deg); }
    .match-vs-text { transform: skewX(15deg); }
    .pts-badge { background: linear-gradient(180deg, #1a2e1a 0%, #0d1a1a 100%); color: #00ff88; border: 1px solid rgba(0, 255, 136, 0.2); font-family: 'Orbitron', sans-serif; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .fade-in { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="text-slate-300 antialiased overflow-x-hidden">

<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

const API_KEY = "AIzaSyApGYcd8sgEVoZvlwZvRS5qByRcbSmaUzI";
const SPREADSHEET_ID = "1TmRqkpdzmiwaqGL8wGLhuj5ymc-LZsAsLQxC3jwJ11U";
const TABLA_SHEET = "Tabla_Posiciones";
const PARTIDOS_SHEET = "Rol_Partidos";
const GOLEADORES_SHEET = "Goleadores";

function App() {
  const [tabla, setTabla] = useState([]);
  const [partidos, setPartidos] = useState([]);
  const [goleadores, setGoleadores] = useState([]);
  const [busqueda, setBusqueda] = useState("");
  const [tabActiva, setTabActiva] = useState("tabla");

  const fetchData = async () => {
    try {
      const ts = new Date().getTime();
      const [resT, resP, resG] = await Promise.all([
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${TABLA_SHEET}!A:I?key=${API_KEY}&t=${ts}`),
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${PARTIDOS_SHEET}!A:G?key=${API_KEY}&t=${ts}`),
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${GOLEADORES_SHEET}!A:C?key=${API_KEY}&t=${ts}`)
      ]);

      const dataT = await resT.json();
      const dataP = await resP.json();
      const dataG = await resG.json();

      if (dataT.values) {
        const rows = dataT.values.slice(1).filter(f => f[0]).map(fila => ({
          club: fila[0], pj: fila[1] || "0", pg: fila[2] || "0", pp: fila[3] || "0", 
          pe: fila[4] || "0", gf: fila[5] || "0", gc: fila[6] || "0", dg: fila[7] || "0", pts: fila[8] || "0"
        }));
        setTabla(rows.sort((a, b) => Number(b.pts) - Number(a.pts) || Number(b.dg) - Number(a.dg)));
      }

      if (dataP.values) {
        setPartidos(dataP.values.slice(1).filter(f => f[0]).map(f => ({
          local: f[0], visitante: f[1], hora: f[2], lugar: f[3], fecha: f[4],
          golesL: f[5], golesV: f[6]
        })));
      }

      if (dataG.values) {
        setGoleadores(dataG.values.slice(1).filter(f => f[0]).map(f => ({
          nombre: f[0], club: f[1], goles: f[2]
        })).sort((a,b) => Number(b.goles) - Number(a.goles)));
      }

    } catch (e) { console.error("Error cargando datos:", e); }
  };

  useEffect(() => { fetchData(); }, []);

  // Funci√≥n para determinar el color del marcador
  const getScoreColor = (golesPropio, golesRival) => {
    if (!golesPropio || !golesRival || golesPropio === "-" || golesRival === "-") return "text-white border-white/20";
    const gP = Number(golesPropio);
    const gR = Number(golesRival);
    if (gP > gR) return "text-green-400 border-green-500/50 shadow-[0_0_10px_rgba(74,222,128,0.2)]";
    if (gP < gR) return "text-red-500 border-red-500/50 shadow-[0_0_10px_rgba(239,68,68,0.2)]";
    return "text-white border-white/20";
  };

  return (
    <div className="min-h-screen flex flex-col">
      <header className="bg-black/40 backdrop-blur-md border-b border-white/5 pt-8 px-4 sticky top-0 z-50">
        <div className="max-w-5xl mx-auto">
          <div className="flex items-center gap-4 mb-8">
            <div className="bg-[#00ff88] p-2.5 rounded-lg shadow-[0_0_20px_rgba(0,255,136,0.4)]">
              <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>
            </div>
            <div>
              <h1 className="text-2xl font-black text-white tracking-tighter uppercase font-sport italic">Baj√≠o Norte</h1>
              <p className="text-[10px] text-green-400 font-bold tracking-[0.2em] uppercase">Torneo apertura 2026</p>
            </div>
          </div>
          <nav className="flex gap-10 overflow-x-auto no-scrollbar">
            {["tabla", "partidos", "goleadores"].map((id) => (
              <button key={id} onClick={() => setTabActiva(id)} 
                className={`pb-4 text-xs font-black uppercase tracking-widest transition-all whitespace-nowrap ${tabActiva === id ? "active-tab" : "text-slate-500 hover:text-slate-300"}`}>
                {id === "tabla" ? "Clasificaci√≥n" : id}
              </button>
            ))}
          </nav>
        </div>
      </header>

      <main className="flex-grow max-w-5xl mx-auto w-full p-4 md:p-8 fade-in">
        {tabActiva === "tabla" && (
          <div className="space-y-6">
            <input type="text" placeholder="NOMBRE DE CLUB..." value={busqueda} onChange={(e) => setBusqueda(e.target.value)}
              className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-xs font-bold tracking-widest text-white focus:outline-none focus:border-[#00ff88]/50" />
            <div className="table-container rounded-2xl overflow-hidden shadow-2xl">
              <div className="overflow-x-auto no-scrollbar">
                <table className="w-full text-left">
                  <thead>
                    <tr className="bg-white/5 text-slate-400 text-[9px] uppercase tracking-[0.2em] font-black border-b border-white/5">
                      <th className="px-4 py-5 text-center">Pos</th>
                      <th className="px-4 py-5">Equipo</th>
                      <th className="px-2 py-5 text-center">PJ</th>
                      <th className="px-2 py-5 text-center text-green-400">PG</th>
                      <th className="px-2 py-5 text-center">PE</th>
                      <th className="px-2 py-5 text-center text-red-400">PP</th>
                      <th className="px-2 py-5 text-center">GF</th>
                      <th className="px-2 py-5 text-center">GC</th>
                      <th className="px-2 py-5 text-center">DG</th>
                      <th className="px-4 py-5 text-center text-white">Pts</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-white/5">
                    {tabla.filter(f => f.club.toLowerCase().includes(busqueda.toLowerCase())).map((fila, i) => (
                      <tr key={i} className="hover:bg-white/[0.02] transition-colors">
                        <td className="px-4 py-5 text-center font-sport text-sm font-bold text-slate-500">{i + 1}</td>
                        <td className="px-4 py-5 font-extrabold text-white text-sm uppercase">{fila.club}</td>
                        <td className="px-2 py-5 text-center font-bold text-slate-400">{fila.pj}</td>
                        <td className="px-2 py-5 text-center font-bold text-green-500/80">{fila.pg}</td>
                        <td className="px-2 py-5 text-center font-bold text-slate-400">{fila.pe}</td>
                        <td className="px-2 py-5 text-center font-bold text-red-500/70">{fila.pp}</td>
                        <td className="px-2 py-5 text-center text-xs">{fila.gf}</td>
                        <td className="px-2 py-5 text-center text-xs">{fila.gc}</td>
                        <td className="px-2 py-5 text-center font-sport text-xs">
                          <span className={Number(fila.dg) >= 0 ? 'text-green-400' : 'text-red-400'}>{fila.dg > 0 ? `+${fila.dg}` : fila.dg}</span>
                        </td>
                        <td className="px-4 py-5 text-center">
                          <div className="pts-badge px-4 py-1.5 rounded-lg text-sm font-black inline-block">{fila.pts}</div>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        )}

        {tabActiva === "partidos" && (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {partidos.map((p, i) => (
              <div key={i} className="match-card rounded-xl overflow-hidden group border-white/5">
                <div className="flex items-center justify-between p-4 relative">
                  {/* Local */}
                  <div className="flex flex-col items-center flex-1">
                    <span className="text-[14px] font-black text-white uppercase text-center leading-tight mb-2 h-10 flex items-center">{p.local}</span>
                    <div className={`w-14 h-12 flex items-center justify-center rounded-lg text-2xl font-black font-sport bg-white/5 border ${getScoreColor(p.golesL, p.golesV)}`}>
                      {p.golesL || "-"}
                    </div>
                  </div>

                  {/* VS */}
                  <div className="flex flex-col items-center mx-3 pt-8">
                    <div className="match-vs-box px-2 py-0.5 italic">
                      <span className="match-vs-text text-[10px] font-black tracking-tighter">VS</span>
                    </div>
                  </div>

                  {/* Visitante */}
                  <div className="flex flex-col items-center flex-1">
                    <span className="text-[14px] font-black text-white uppercase text-center leading-tight mb-2 h-10 flex items-center">{p.visitante}</span>
                    <div className={`w-14 h-12 flex items-center justify-center rounded-lg text-2xl font-black font-sport bg-white/5 border ${getScoreColor(p.golesV, p.golesL)}`}>
                      {p.golesV || "-"}
                    </div>
                  </div>
                </div>

                <div className="bg-black/20 py-2.5 px-4 flex justify-between items-center text-[10px] font-bold uppercase tracking-widest text-slate-500 border-t border-white/5">
                  <span className="text-slate-400">{p.fecha}</span>
                  <span className="text-[#00ff88] font-sport">{p.hora} HRS</span>
                  <span className="truncate max-w-[100px]">üìç {p.lugar}</span>
                </div>
              </div>
            ))}
          </div>
        )}

        {tabActiva === "goleadores" && (
          <div className="max-w-2xl mx-auto space-y-4">
            {goleadores.map((g, i) => (
              <div key={i} className="bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center justify-between hover:border-green-500/30">
                <div className="flex items-center gap-4">
                  <span className="font-sport text-xl font-black text-slate-700 italic">#{i+1}</span>
                  <div>
                    <p className="text-sm font-black text-white uppercase">{g.nombre}</p>
                    <p className="text-[9px] text-green-500 font-bold uppercase tracking-widest">{g.club}</p>
                  </div>
                </div>
                <div className="text-3xl font-sport font-black text-white bg-green-500/10 px-4 py-1 rounded-xl border border-green-500/20">{g.goles}</div>
              </div>
            ))}
          </div>
        )}
      </main>

      <footer className="text-center py-12 border-t border-white/5 mt-10 opacity-60">
        <p className="text-[9px] font-black tracking-[0.5em] uppercase text-slate-600">Admin por DR. OMAR FLORES MONTA√ëO ‚Ä¢ 2026</p>
      </footer>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);
</script>
</body>
</html>
