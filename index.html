<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Copa Liga Barrial 2026</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; background-color: #0b0f1a; -webkit-tap-highlight-color: transparent; }
    .active-tab { color: #22c55e; border-bottom: 3px solid #22c55e; }
    .table-container { background-color: #121826; border: 1px solid #1f2937; }
    .pts-badge {
      background-color: #0d1a1a;
      color: #22c55e;
      padding: 6px 16px;
      border-radius: 12px;
      font-weight: 800;
      display: inline-block;
      min-width: 45px;
      text-align: center;
      border: 1px solid rgba(34, 197, 94, 0.1);
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .fade-in { animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="text-slate-300 antialiased overflow-x-hidden">

<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

const API_KEY = "AIzaSyApGYcd8sgEVoZvlwZvRS5qByRcbSmaUzI";
const SPREADSHEET_ID = "1TmRqkpdzmiwaqGL8wGLhuj5ymc-LZsAsLQxC3jwJ11U";
const TABLA_SHEET = "Tabla_Posiciones";
const PARTIDOS_SHEET = "Rol_Partidos";
const GOLEADORES_SHEET = "Goleadores";

function App() {
  const [tabla, setTabla] = useState([]);
  const [partidos, setPartidos] = useState([]);
  const [goleadores, setGoleadores] = useState([]);
  const [busqueda, setBusqueda] = useState("");
  const [tabActiva, setTabActiva] = useState("tabla");

  const fetchData = async () => {
    try {
      const [resT, resP, resG] = await Promise.all([
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${TABLA_SHEET}?key=${API_KEY}`),
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${PARTIDOS_SHEET}?key=${API_KEY}`),
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${GOLEADORES_SHEET}?key=${API_KEY}`)
      ]);
      const dataT = await resT.json();
      const dataP = await resP.json();
      const dataG = await resG.json();

      if (dataT.values) {
        const rows = dataT.values.slice(1).map(fila => {
          const gf = Number(fila[5]) || 0;
          const gc = Number(fila[6]) || 0;
          return {
            club: fila[0],
            pj: fila[1] || "0",
            pg: fila[2] || "0",
            pp: fila[3] || "0",
            pe: fila[4] || "0",
            gf: gf,
            gc: gc,
            dg: gf - gc,
            pts: fila[8] || "0"
          };
        });
        setTabla(rows.sort((a, b) => Number(b.pts) - Number(a.pts) || Number(b.dg) - Number(a.dg)));
      }
      if (dataP.values) setPartidos(dataP.values.slice(1).map(f => ({ local: f[0], visitante: f[1], hora: f[2], lugar: f[3], fecha: f[4] })));
      if (dataG.values) setGoleadores(dataG.values.slice(1).map(f => ({ nombre: f[0], club: f[1], goles: f[2] })).sort((a,b) => b.goles - a.goles));

    } catch (e) { console.error("Error", e); }
  };

  useEffect(() => { fetchData(); }, []);

  const tablaFiltrada = tabla.filter(item => item.club && item.club.toLowerCase().includes(busqueda.toLowerCase()));
  const partidosFiltrados = partidos.filter(p => 
    (p.local && p.local.toLowerCase().includes(busqueda.toLowerCase())) || 
    (p.visitante && p.visitante.toLowerCase().includes(busqueda.toLowerCase()))
  );

  return (
    <div className="min-h-screen flex flex-col">
      {/* HEADER PREMIUM (Original) */}
      <header className="bg-[#121826] border-b border-slate-800 pt-6 px-4 sticky top-0 z-50">
        <div className="max-w-5xl mx-auto">
          <div className="flex justify-between items-center mb-6">
            <div className="flex items-center gap-3">
              <div className="bg-green-500 p-2 rounded-xl text-black">üèÜ</div>
              <h1 className="text-xl font-bold text-white tracking-tight">Liga de f√∫tbol Baj√≠o del norte 2026</h1>
            </div>
            <div className="flex items-center gap-2 text-[10px] text-green-500 font-bold border border-green-500/30 px-3 py-1 rounded-full uppercase">
               <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> Conectado
            </div>
          </div>

          <div className="relative mb-6">
            <span className="absolute inset-y-0 left-4 flex items-center text-slate-500">üîç</span>
            <input 
              type="text" 
              placeholder="Buscar club..." 
              value={busqueda}
              onChange={(e) => setBusqueda(e.target.value)}
              className="w-full bg-slate-900 border border-slate-700 rounded-2xl pl-11 pr-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all" 
            />
          </div>

          <nav className="flex gap-8 overflow-x-auto no-scrollbar">
            <button onClick={() => setTabActiva("tabla")} className={`pb-4 text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap ${tabActiva === "tabla" ? "active-tab" : "text-slate-500"}`}>Posiciones</button>
            <button onClick={() => setTabActiva("partidos")} className={`pb-4 text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap ${tabActiva === "partidos" ? "active-tab" : "text-slate-500"}`}>Partidos</button>
            <button onClick={() => setTabActiva("goleadores")} className={`pb-4 text-xs font-bold uppercase tracking-widest transition-all whitespace-nowrap ${tabActiva === "goleadores" ? "active-tab" : "text-slate-500"}`}>Goleadores</button>
          </nav>
        </div>
      </header>

      <main className="flex-grow max-w-5xl mx-auto w-full p-4 md:p-6 fade-in">
        
        {/* TABLA DE POSICIONES (Dise√±o Original con DG Autom√°tico) */}
        {tabActiva === "tabla" && (
          <div className="table-container rounded-3xl overflow-hidden shadow-2xl">
            <div className="overflow-x-auto no-scrollbar">
              <table className="w-full text-left min-w-[700px] sm:min-w-full">
                <thead>
                  <tr className="text-slate-500 text-[10px] uppercase tracking-widest font-extrabold border-b border-slate-800">
                    <th className="px-6 py-5">#</th>
                    <th className="px-6 py-5">Club</th>
                    <th className="px-4 py-5 text-center">PJ</th>
                    <th className="px-4 py-5 text-center text-green-500">PG</th>
                    <th className="px-4 py-5 text-center text-yellow-500 font-bold">PE</th>
                    <th className="px-4 py-5 text-center text-red-500">PP</th>
                    <th className="px-4 py-5 text-center">GF</th>
                    <th className="px-4 py-5 text-center">GC</th>
                    <th className="px-4 py-5 text-center">DG</th>
                    <th className="px-6 py-5 text-center text-white font-black">PTS</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-slate-800/50">
                  {tablaFiltrada.map((fila, i) => (
                    <tr key={i} className="hover:bg-slate-800/30 transition-colors group">
                      <td className="px-6 py-4 relative">
                        <span className={`absolute left-0 top-3 bottom-3 w-1 rounded-r-lg ${i < 3 ? 'bg-green-500' : 'bg-red-500'}`}></span>
                        <div className="text-xs font-bold text-slate-500 ml-2">{i + 1}</div>
                      </td>
                      <td className="px-6 py-4">
                        <div className="flex items-center gap-3">
                          <div className="w-8 h-8 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center text-[10px] font-black text-slate-500 uppercase">{fila.club.substring(0,3)}</div>
                          <span className="font-bold text-white text-sm uppercase">{fila.club}</span>
                        </div>
                      </td>
                      <td className="px-4 py-4 text-center text-slate-400">{fila.pj}</td>
                      <td className="px-4 py-4 text-center font-bold text-green-500/80">{fila.pg}</td>
                      <td className="px-4 py-4 text-center font-bold text-yellow-500/80">{fila.pe}</td>
                      <td className="px-4 py-4 text-center font-bold text-red-500/70">{fila.pp}</td>
                      <td className="px-4 py-4 text-center text-slate-500">{fila.gf}</td>
                      <td className="px-4 py-4 text-center text-slate-500">{fila.gc}</td>
                      <td className="px-4 py-4 text-center font-bold">
                          <span className={fila.dg >= 0 ? 'text-green-500' : 'text-red-500'}>{fila.dg > 0 ? `+${fila.dg}` : fila.dg}</span>
                      </td>
                      <td className="px-6 py-4 text-center">
                        <div className="pts-badge">{fila.pts}</div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}

        {/* TABLA DE GOLEADORES CON PODIO (Nueva) */}
        {tabActiva === "goleadores" && (
          <div className="space-y-8 max-w-2xl mx-auto">
            <div className="grid grid-cols-3 gap-3 items-end px-2">
               {goleadores[1] && (
                 <div className="bg-slate-800/40 rounded-t-2xl p-4 text-center border-t-2 border-slate-400">
                    <p className="text-[10px] font-black text-slate-400 mb-1 uppercase tracking-widest">2do</p>
                    <p className="text-xs font-bold text-white truncate mb-2">{goleadores[1].nombre}</p>
                    <p className="text-2xl font-black text-slate-300">{goleadores[1].goles}</p>
                 </div>
               )}
               {goleadores[0] && (
                 <div className="bg-green-500/10 rounded-t-3xl p-6 text-center border-t-4 border-green-500 shadow-2xl shadow-green-500/20">
                    <p className="text-xs font-black text-green-500 mb-1 uppercase tracking-tighter">Goleador</p>
                    <p className="text-sm font-black text-white truncate mb-2 uppercase">{goleadores[0].nombre}</p>
                    <p className="text-4xl font-black text-green-500">{goleadores[0].goles}</p>
                 </div>
               )}
               {goleadores[2] && (
                 <div className="bg-slate-800/40 rounded-t-2xl p-4 text-center border-t-2 border-orange-800">
                    <p className="text-[10px] font-black text-slate-400 mb-1 uppercase tracking-widest">3ro</p>
                    <p className="text-xs font-bold text-white truncate mb-2">{goleadores[2].nombre}</p>
                    <p className="text-2xl font-black text-slate-300">{goleadores[2].goles}</p>
                 </div>
               )}
            </div>

            <div className="table-container rounded-3xl">
              <table className="w-full text-left">
                <tbody className="divide-y divide-slate-800/40">
                  {goleadores.map((g, i) => (
                    <tr key={i} className="hover:bg-slate-800/20 transition-colors">
                      <td className="px-6 py-5 w-12 text-center font-bold text-slate-600 text-sm">{i + 1}</td>
                      <td className="px-2 py-5">
                        <p className="text-sm font-bold text-white uppercase">{g.nombre}</p>
                        <p className="text-[10px] text-slate-500 uppercase font-black">{g.club}</p>
                      </td>
                      <td className="px-8 py-5 text-right font-black text-xl text-green-500">{g.goles}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}

        {/* ROL DE PARTIDOS (Dise√±o Original de Tarjetas) */}
        {tabActiva === "partidos" && (
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {partidosFiltrados.map((p, i) => (
              <div key={i} className="table-container rounded-3xl p-6 hover:border-green-500/40 transition-all group shadow-lg border-l-4 border-l-green-500">
                <div className="flex justify-between items-center mb-6">
                    <span className="text-[10px] bg-slate-900 text-slate-500 px-3 py-1 rounded-lg font-bold uppercase tracking-tight">{p.fecha}</span>
                    <span className="text-green-500 text-[11px] font-black tracking-widest">{p.hora}</span>
                </div>
                <div className="flex items-center justify-between gap-4">
                  <div className="text-center flex-1">
                    <div className="w-12 h-12 mx-auto rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center mb-2 font-black text-xs uppercase">{p.local?.substring(0,3)}</div>
                    <p className="text-[12px] font-bold text-white uppercase leading-tight truncate">{p.local}</p>
                  </div>
                  <div className="text-slate-800 font-black italic text-xl">VS</div>
                  <div className="text-center flex-1">
                    <div className="w-12 h-12 mx-auto rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center mb-2 font-black text-xs uppercase">{p.visitante?.substring(0,3)}</div>
                    <p className="text-[12px] font-bold text-white uppercase leading-tight truncate">{p.visitante}</p>
                  </div>
                </div>
                <div className="mt-6 pt-4 border-t border-slate-800/50 text-center text-[10px] text-slate-500 font-bold uppercase tracking-widest">üìç {p.lugar}</div>
              </div>
            ))}
          </div>
        )}
      </main>

      <footer className="text-center py-10 text-slate-600 text-[10px] font-bold tracking-[0.3em] uppercase opacity-40">¬© 2026 Admin por DR. OMAR FLORES MONTA√ëO</footer>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);
</script>
</body>
</html>
