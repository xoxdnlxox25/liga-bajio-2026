<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Copa Liga Barrial 2026</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      background-color: #05070a; /* Fondo ultra oscuro */
      background-image: radial-gradient(circle at top right, #1a2e1a 0%, #05070a 50%);
      -webkit-tap-highlight-color: transparent; 
    }
    
    .font-sport { font-family: 'Orbitron', sans-serif; }

    .active-tab { color: #00ff88; border-bottom: 3px solid #00ff88; text-shadow: 0 0 10px rgba(0,255,136,0.5); }
    
    /* Contenedor principal con efecto cristal */
    .table-container { 
      background: rgba(18, 24, 38, 0.8); 
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.05); 
    }
    
    /* Estilo Tarjeta de Partido "Broadcast TV" */
    .match-card {
      background: linear-gradient(145deg, #111827 0%, #030712 100%);
      border: 1px solid rgba(255,255,255,0.05);
      position: relative;
      box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
    }

    .match-vs-box {
      background: #00ff88;
      color: #000;
      transform: skewX(-15deg);
      box-shadow: 0 0 15px rgba(0,255,136,0.3);
    }

    .match-vs-text {
      transform: skewX(15deg); /* Deshacer el skew para el texto */
    }

    .info-strip {
      background: rgba(255, 255, 255, 0.03);
      border-top: 1px solid rgba(255,255,255,0.05);
    }

    .pts-badge {
      background: linear-gradient(180deg, #1a2e1a 0%, #0d1a1a 100%);
      color: #00ff88;
      border: 1px solid rgba(0, 255, 136, 0.2);
      font-family: 'Orbitron', sans-serif;
    }

    .no-scrollbar::-webkit-scrollbar { display: none; }
    .fade-in { animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="text-slate-300 antialiased overflow-x-hidden">

<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

const API_KEY = "AIzaSyApGYcd8sgEVoZvlwZvRS5qByRcbSmaUzI";
const SPREADSHEET_ID = "1TmRqkpdzmiwaqGL8wGLhuj5ymc-LZsAsLQxC3jwJ11U";
const TABLA_SHEET = "Tabla_Posiciones";
const PARTIDOS_SHEET = "Rol_Partidos";
const GOLEADORES_SHEET = "Goleadores";

function App() {
  const [tabla, setTabla] = useState([]);
  const [partidos, setPartidos] = useState([]);
  const [goleadores, setGoleadores] = useState([]);
  const [busqueda, setBusqueda] = useState("");
  const [tabActiva, setTabActiva] = useState("tabla");

  const fetchData = async () => {
    try {
      const [resT, resP, resG] = await Promise.all([
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${TABLA_SHEET}?key=${API_KEY}`),
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${PARTIDOS_SHEET}?key=${API_KEY}`),
        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${GOLEADORES_SHEET}?key=${API_KEY}`)
      ]);
      const dataT = await resT.json();
      const dataP = await resP.json();
      const dataG = await resG.json();

      if (dataT.values) {
        const rows = dataT.values.slice(1).map(fila => {
          const gf = Number(fila[5]) || 0;
          const gc = Number(fila[6]) || 0;
          return {
            club: fila[0],
            pj: fila[1] || "0",
            pg: fila[2] || "0",
            pp: fila[3] || "0",
            pe: fila[4] || "0",
            gf: gf,
            gc: gc,
            dg: gf - gc,
            pts: fila[8] || "0"
          };
        });
        setTabla(rows.sort((a, b) => Number(b.pts) - Number(a.pts) || Number(b.dg) - Number(a.dg)));
      }
      if (dataP.values) setPartidos(dataP.values.slice(1).map(f => ({ local: f[0], visitante: f[1], hora: f[2], lugar: f[3], fecha: f[4] })));
      if (dataG.values) setGoleadores(dataG.values.slice(1).map(f => ({ nombre: f[0], club: f[1], goles: f[2] })).sort((a,b) => b.goles - a.goles));

    } catch (e) { console.error("Error", e); }
  };

  useEffect(() => { fetchData(); }, []);

  const tablaFiltrada = tabla.filter(item => item.club && item.club.toLowerCase().includes(busqueda.toLowerCase()));

  return (
    <div className="min-h-screen flex flex-col">
      <header className="bg-black/40 backdrop-blur-md border-b border-white/5 pt-8 px-4 sticky top-0 z-50">
        <div className="max-w-5xl mx-auto">
          <div className="flex justify-between items-end mb-8">
            <div className="flex items-center gap-4">
              <div className="bg-[#00ff88] p-2.5 rounded-lg shadow-[0_0_20px_rgba(0,255,136,0.4)]">
                <svg className="w-6 h-6 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>
              </div>
              <div>
                <h1 className="text-2xl font-black text-white tracking-tighter uppercase font-sport italic">Baj√≠o Norte</h1>
                <p className="text-[10px] text-green-400 font-bold tracking-[0.2em] uppercase">Tournament 2026</p>
              </div>
            </div>
          </div>

          <nav className="flex gap-10 overflow-x-auto no-scrollbar">
            {["tabla", "partidos", "goleadores"].map((id) => (
              <button 
                key={id}
                onClick={() => { setTabActiva(id); setBusqueda(""); }} 
                className={`pb-4 text-xs font-black uppercase tracking-widest transition-all whitespace-nowrap ${tabActiva === id ? "active-tab" : "text-slate-500 hover:text-slate-300"}`}
              >
                {id === "tabla" ? "Clasificaci√≥n" : id}
              </button>
            ))}
          </nav>
        </div>
      </header>

      <main className="flex-grow max-w-4xl mx-auto w-full p-4 md:p-8 fade-in">
        
        {tabActiva === "tabla" && (
          <div className="space-y-4">
            <div className="relative mb-8">
                <input 
                  type="text" 
                  placeholder="FILTRAR CLUB..." 
                  value={busqueda}
                  onChange={(e) => setBusqueda(e.target.value)}
                  className="w-full bg-white/5 border border-white/10 rounded-xl pl-12 pr-4 py-4 text-xs font-bold tracking-widest focus:outline-none focus:border-[#00ff88]/50 focus:ring-1 focus:ring-[#00ff88]/50 transition-all text-white" 
                />
                <span className="absolute inset-y-0 left-4 flex items-center text-slate-500">üîç</span>
            </div>

            <div className="table-container rounded-2xl overflow-hidden shadow-2xl border border-white/5">
              <div className="overflow-x-auto no-scrollbar">
                <table className="w-full text-left">
                  <thead>
                    <tr className="bg-white/5 text-slate-400 text-[9px] uppercase tracking-[0.2em] font-black border-b border-white/5">
                      <th className="px-6 py-5 text-center">Pos</th>
                      <th className="px-6 py-5">Equipo</th>
                      <th className="px-4 py-5 text-center">PJ</th>
                      <th className="px-4 py-5 text-center text-green-400">PG</th>
                      <th className="px-4 py-5 text-center text-red-400">PP</th>
                      <th className="px-4 py-5 text-center">DG</th>
                      <th className="px-6 py-5 text-center text-white">Pts</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-white/5">
                    {tablaFiltrada.map((fila, i) => (
                      <tr key={i} className="hover:bg-white/[0.02] transition-colors group">
                        <td className="px-6 py-5 text-center font-sport text-sm font-bold text-slate-500">{i + 1}</td>
                        <td className="px-6 py-5">
                          <span className="font-extrabold text-white text-sm tracking-tight uppercase">{fila.club}</span>
                        </td>
                        <td className="px-4 py-5 text-center font-bold text-slate-400">{fila.pj}</td>
                        <td className="px-4 py-5 text-center font-bold text-green-500/80">{fila.pg}</td>
                        <td className="px-4 py-5 text-center font-bold text-red-500/70">{fila.pp}</td>
                        <td className="px-4 py-5 text-center font-sport text-xs">
                            <span className={fila.dg >= 0 ? 'text-green-400' : 'text-red-400'}>{fila.dg > 0 ? `+${fila.dg}` : fila.dg}</span>
                        </td>
                        <td className="px-6 py-5 text-center">
                          <div className="pts-badge px-4 py-1.5 rounded-lg text-sm font-black inline-block">{fila.pts}</div>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        )}

        {tabActiva === "partidos" && (
          <div className="grid gap-6">
            <div className="flex items-center gap-4 mb-4">
                <div className="h-[2px] flex-grow bg-gradient-to-r from-transparent via-green-500/50 to-transparent"></div>
                <span className="text-[10px] font-black tracking-[0.4em] text-green-500 uppercase">Pr√≥ximos Encuentros</span>
                <div className="h-[2px] flex-grow bg-gradient-to-r from-transparent via-green-500/50 to-transparent"></div>
            </div>
            {partidos.map((p, i) => (
              <div key={i} className="match-card rounded-2xl overflow-hidden group">
                <div className="flex items-center justify-between p-6 sm:px-12 relative">
                  
                  {/* Equipo Local */}
                  <div className="flex flex-col items-center gap-2 flex-1">
                    <div className="w-14 h-14 rounded-full bg-gradient-to-b from-white/10 to-transparent flex items-center justify-center border border-white/10 group-hover:border-green-500/50 transition-all">
                      <span className="text-xs font-black text-white font-sport uppercase">{p.local?.substring(0,3)}</span>
                    </div>
                    <span className="text-xs font-black text-white uppercase tracking-tighter text-center">{p.local}</span>
                  </div>

                  {/* VS con dise√±o agresivo */}
                  <div className="flex flex-col items-center mx-4">
                    <div className="match-vs-box px-6 py-1 italic mb-2">
                      <span className="match-vs-text text-sm font-black tracking-tighter">VS</span>
                    </div>
                  </div>

                  {/* Equipo Visitante */}
                  <div className="flex flex-col items-center gap-2 flex-1">
                    <div className="w-14 h-14 rounded-full bg-gradient-to-b from-white/10 to-transparent flex items-center justify-center border border-white/10 group-hover:border-green-500/50 transition-all">
                      <span className="text-xs font-black text-white font-sport uppercase">{p.visitante?.substring(0,3)}</span>
                    </div>
                    <span className="text-xs font-black text-white uppercase tracking-tighter text-center">{p.visitante}</span>
                  </div>
                </div>

                {/* Info del partido con colores de TV */}
                <div className="info-strip py-3 px-6 flex justify-between items-center">
                  <div className="flex items-center gap-2">
                    <span className="w-2 h-2 rounded-full bg-red-600 animate-pulse"></span>
                    <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">{p.fecha}</span>
                  </div>
                  <div className="text-[11px] font-sport font-bold text-[#00ff88]">{p.hora} <span className="text-[9px] opacity-60">HRS</span></div>
                  <div className="text-[10px] text-slate-500 font-bold uppercase tracking-tight">üìç {p.lugar}</div>
                </div>
              </div>
            ))}
          </div>
        )}

        {tabActiva === "goleadores" && (
          <div className="max-w-2xl mx-auto space-y-6">
            {goleadores.map((g, i) => (
              <div key={i} className="bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center justify-between hover:border-green-500/30 transition-all">
                <div className="flex items-center gap-4">
                  <span className="font-sport text-xl font-black text-slate-700 italic">#{i+1}</span>
                  <div>
                    <p className="text-sm font-black text-white uppercase tracking-tight">{g.nombre}</p>
                    <p className="text-[9px] text-green-500 font-bold uppercase tracking-widest">{g.club}</p>
                  </div>
                </div>
                <div className="text-3xl font-sport font-black text-white bg-green-500/10 px-4 py-1 rounded-xl border border-green-500/20">{g.goles}</div>
              </div>
            ))}
          </div>
        )}
      </main>

      <footer className="text-center py-12 px-4 border-t border-white/5 mt-10">
        <p className="text-slate-600 text-[9px] font-black tracking-[0.5em] uppercase opacity-60">
          Admin por DR. OMAR FLORES MONTA√ëO ‚Ä¢ 2026 Official Digital Hub
        </p>
      </footer>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);
</script>
</body>
</html>
